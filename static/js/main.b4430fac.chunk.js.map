{"version":3,"sources":["data/ScriptUtils.js","data/AppUtils.js","data/ScriptConstants.js","data/simulate.js","views/components/BustabitScriptConfig.jsx","views/components/LineChart.jsx","views/components/OptionsMenu.jsx","views/components/BustabitScript.jsx","views/components/Disclaimer.jsx","views/components/Donate.jsx","data/NotificationTypes.js","views/components/Notifications.jsx","data/AppDispatcher.js","data/ScriptActionTypes.js","data/NotificationActionTypes.js","data/NotificationActions.js","data/ScriptActions.js","views/AppView.jsx","data/ScriptStore.js","data/ScriptListStore.js","data/NotificationStore.js","containers/AppContainer.js","serviceWorker.js","index.js"],"names":["getLocalStorageScripts","loadedScripts","JSON","parse","localStorage","getItem","e","setLocalStorageScripts","scripts","undefined","constructor","Object","keys","length","removeItem","setItem","stringify","onBeforeSave","script","oldConfig","config","getConfigFromScriptText","assignConfigValues","values","TypeError","key","value","type","options","splitConfigFromScriptText","regexp","match","exec","String","text","trim","eval","getScriptTextWithoutConfig","ScriptUtils","load","restoreSamples","restoreSample","id","isSample","Error","name","sample","ScriptConstants","SCRIPT_SAMPLES","find","forEach","getUniqueID","save","delete","run","settings","gameHash","gameAmount","startingBalance","drawChart","quickTest","arguments","then","callback","setTimeout","simulate","results","catch","error","console","exportScripts","Promise","reject","zip","JSZip","file","generateAsync","blob","dateTime","Date","toISOString","replace","saveAs","exportScript","Blob","setClipboardContent","navigator","clipboard","writeText","existingIds","attempt","CryptoJS","lib","WordArray","random","indexOf","NEW_SCRIPT","hashToBust","seed","HmacSHA256","enc","Hex","toString","slice","nBits","X","parseInt","Math","pow","result","floor","max","hashToBusts","amount","isNaN","prevHash","unshift","hash","bust","index","SHA256","SimulatedBustabitHistory","this","data","size","SimulatedBustabitEngine","_userInfo","uname","balance","balanceATH","balanceATL","winStreak","loseStreak","streakSum","sumWagers","highBet","lowBet","bets","profit","profitATH","profitATL","profitPerHour","duration","history","bet","bind","next","wager","payout","resolve","round","isAuto","EventEmitter","evalScript","engine","userInfo","log","stop","gameResultFromHash","logMessages","shouldStop","shouldStopReason","logFuncs","warn","info","debug","noLog","msg","Array","prototype","call","join","message","assign","chartData","context","reason","notify","games","nextGame","setImmediate","game","isSimulation","cashedAt","gameState","emit","gameId","endSimulation","sinceWin","sinceLose","doGame","BustabitScriptConfig","props","handleConfigFieldChange","path","split","obj","i","onChange","className","rest","map","element","component","FieldTypes","Component","freeze","label","optional","htmlFor","parseFloat","required","step","eventInfo","target","checked","optionFieldChange","style","width","padding","option","LineChart","state","tooltipData","handleTooltipChange","shouldUpdateLineChart","updateLineChart","container","ReactDOM","findDOMNode","prevProps","prevState","viewBoxWidth","viewBoxHeight","xAccessor","yAccessor","crosshairEnabled","crosshairClassName","preserveAspectRatio","visibility","setState","some","propName","prev","current","isArray","onTooltipChange","svgElement","d3","select","tooltipElement","attr","margin","top","right","bottom","left","margin2","height","height2","selectAll","remove","selected","xScale","range","xScale2","yScale","yScale2","xAxis","xAxis2","yAxis","tickFormat","n","lineX","d","lineY","line","x","y","line2X","line2Y","line2","brush","extent","on","brushed","zoom","scaleExtent","Infinity","translateExtent","zoomed","append","crosshairElement","g_lines","g_axes","overlay","withData","domain","datum","enter","move","mousemove","classed","bisect","dx","mousex","invert","d0","d1","abs","moveCrosshair","moveTooltip","tooltipX","tooltipY","svgMouse","node","containerMouse","tooltipOffset","tooltipSize","getBoundingClientRect","xdomain","ydomain","transition","ease","sourceEvent","s","selection","transform","scale","translate","t","rescaleX","invertX","d3LineChart","Tooltip","wrapper","readOnly","OptionsMenu","isOpen","handleWindowClick","handleButtonClick","window","addEventListener","removeEventListener","event","stopPropagation","children","classNames","CircularIconButton","iconClassName","onClick","position","zIndex","filter","OptionsMenuItem","App","editing","creating","deleting","viewState","updateError","onCancel","onRestore","onSave","createError","Title","version","List","deletingId","colSpan","onNew","items","entrySeq","maxWidth","onDeleted","onSelect","onEdit","onDelete","msToTime","seconds","minutes","hours","days","Show","resultsElement","document","getElementById","scrollY","scrollTo","behavior","isLoading","onDeselect","copyScript","icon","min","changes","disabled","args","onRun","Boolean","resize","placeholder","toFixed","Delete","EditButton","SelectButton","DeleteButton","NewButton","GoBackButton","BackToTopButton","scroll","Edit","close","restore","preventDefault","onSubmit","defaultValue","rows","New","Control","BustabitScript","DisclaimerButton","onClose","DisclaimerModal","DonateButton","DonateModal","href","rel","NotificationTypes","INFO","SUCCESS","WARNING","ERROR","getClassByType","Notification","header","modal","notification","NotificationsContainer","notificationProps","enterAnimation","leaveAnimation","item","Notifications","notifications","Dispatcher","ActionTypes","LOADED","NEW","CREATE_ERROR","CREATED","EDIT","UPDATE_ERROR","UPDATED","CANCEL","DELETE","DELETE_ERROR","DELETED","SIMULATE","SIMULATED","OPEN","CLOSE","Actions","open","content","closeable","autoCloseTimeout","NotificationDispatcher","dispatch","NotificationActionTypes","success","warning","AppDispatcher","ScriptActionTypes","NotificationActions","deleted","new","edit","cancel","SELECT","deselect","DESELECT","ExportAllScriptsButton","ScriptActions","AppView","Immutable","OrderedMap","action","clear","merge","set","ReduceStore","editingId","selectedId","isSimulating","Container","createFunctional","ScriptStore","ScriptListStore","NotificationStore","getState","list","get","deleteError","location","hostname","render","AppContainer","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b4430fac.chunk.js","sourcesContent":["import { getUniqueID } from './AppUtils'\nimport ScriptConstants from './ScriptConstants'\nimport simulate from './simulate'\nimport JSZip from 'jszip'\nimport { saveAs } from 'file-saver';\n\n/*\n Helper functions\n*/\n\nfunction getLocalStorageScripts() {\n  try {\n    var loadedScripts = JSON.parse(localStorage.getItem('scripts'))\n  } catch (e) {\n    loadedScripts = null;\n  }\n  return loadedScripts;\n}\n\nfunction setLocalStorageScripts(scripts) {\n  if (scripts === undefined ||\n    scripts === null ||\n    (scripts.constructor === Object && Object.keys(scripts).length === 0)) {\n    localStorage.removeItem('scripts')\n  } else {\n    localStorage.setItem('scripts', JSON.stringify(scripts))\n  }\n}\n\nfunction onBeforeSave(script) {\n  let oldConfig = script.config;\n  script.config = getConfigFromScriptText(script)\n  assignConfigValues(script.config, oldConfig)\n}\n\nfunction assignConfigValues(config, values) {\n  if (!config || config.constructor !== Object) {\n    throw new TypeError('config should be an object')\n  }\n  if (values && values.constructor !== Object) {\n    throw new TypeError('values should be undefined or an object')\n  }\n  if (!values) return config;\n  for (const key in values) {\n    if (!values[key] || values[key].constructor !== Object) continue;\n    if (!config[key]) continue;\n    if (values[key].value === undefined) continue;\n    config[key].value = values[key].value\n    if (config[key].type === 'radio') {\n      config[key].options = assignConfigValues(config[key].options || {}, values[key].options)\n    }\n  }\n  return config\n}\n\n/**\n * There should be a <code>var config = ...</code> at the top of the script.\n * This function will extract that variable from the script and return it as an object,\n * together with the remaining script text.\n * @param {string} script.text The script's actual raw text\n * @returns {Array} The config and the remaining script text.\n */\nfunction splitConfigFromScriptText(script) {\n  const regexp = /^\\s*(var config = {(?:.|\\s)*?^};?)((?:.|\\s)*)$/gm\n  const match = regexp.exec(String(script.text).trim())\n\n  if (match === null) {\n    throw new TypeError('The script should begin with: \\r\\nvar config = {\\r\\n  ...\\r\\n}\\r\\n')\n  }\n  // eslint-disable-next-line\n  const config = eval(match[1] + '\\r\\nconfig;')\n  return [config, match[2]]\n}\n\nfunction getConfigFromScriptText(script) {\n  return splitConfigFromScriptText(script)[0]\n}\n\nfunction getScriptTextWithoutConfig(script) {\n  return splitConfigFromScriptText(script)[1]\n}\n\nconst ScriptUtils = {\n  /**\n   * Load scripts from localStorage.\n   * Will insert sample scripts if there are no scripts yet.\n   * @returns {Object.<string, Object>} all scripts\n   */\n  load() {\n    let scripts = getLocalStorageScripts()\n    if (scripts === null || scripts === undefined) {\n      scripts = ScriptUtils.restoreSamples()\n    }\n    return scripts\n  },\n\n  restoreSample(id) {\n    let scripts = getLocalStorageScripts() || {}\n    if (!scripts[id]?.isSample) {\n      throw new Error(`Can't restore script ${id} (${scripts[id]?.name || 'unknown'}), `\n                      + 'it\\'s not a sample script.')\n    }\n    let sample = ScriptConstants.SCRIPT_SAMPLES.find(script => script.name === scripts[id].name);\n    if (!sample) {\n      throw new Error(`Can't restore script ${id} (${scripts[id]?.name || 'unknown'}), `\n                      + 'the name does not match any known sample scripts.')\n    }\n    scripts[id].text = sample.text\n    onBeforeSave(scripts[id])\n    setLocalStorageScripts(scripts)\n    return scripts\n  },\n\n  /**\n   * Insert or re-insert sample scripts into localStorage.\n   * @returns {Object.<string, Object>} all scripts\n   */\n  restoreSamples() {\n    let scripts = getLocalStorageScripts() || {}\n    Object.keys(scripts).forEach(id => {\n      if (scripts[id].isSample) {\n        delete scripts[id]\n      }\n    })\n    ScriptConstants.SCRIPT_SAMPLES.forEach((script) => {\n      script = { ...script }\n      script.isSample = true\n      script.id = getUniqueID(Object.keys(scripts))\n      onBeforeSave(script)\n      scripts[script.id] = script\n    })\n    setLocalStorageScripts(scripts)\n\n    return scripts\n  },\n\n  /**\n   * Save a script.\n   * @param {Object.<string, Object>} script The script to save\n   */\n  save(script) {\n    let scripts = getLocalStorageScripts()\n    onBeforeSave(script)\n    if (!script.id) {\n      script.id = getUniqueID(Object.keys(scripts))\n    }\n    scripts[script.id] = script\n    setLocalStorageScripts(scripts)\n  },\n\n  /**\n   * Delete a script.\n   * @param {string} id The id of script to delete\n   */\n  delete(id) {\n    let scripts = getLocalStorageScripts()\n    delete scripts[id]\n    setLocalStorageScripts(scripts)\n  },\n\n  /**\n   * Simulate a script on a number of games based on a previous bustabit game's hash.\n   * @param options The simulation options\n   * @param {Object} options.script The script with it's text and config attributes.\n   * @param {string} options.gameHash Some previous bustabit game's hash.\n   * @param {number} options.gameAmount The amount of games to simulate\n   * @param {number} options.startingBalance The amount of Bits to start with.\n   * @param {boolean} options.drawChart Whether to collect extra data that is required for a line chart.\n   * @param {boolean} options.quickTest Disables the script logging in order to speed up large tests.\n   */\n  run({ script, gameHash, gameAmount, startingBalance, drawChart, quickTest }) {\n    let settings = { ...arguments[0] }\n    delete settings.script\n    settings.config = script.config\n    settings.text = getScriptTextWithoutConfig(script)\n\n    return {\n      then: function (callback) {\n        setTimeout(function () {\n          simulate(settings)\n            .then((results) => {\n              callback(results);\n            })\n            .catch(error => {\n              console.error(error)\n              let results = { error: error }\n              callback(results)\n            })\n        }, 100)\n      }\n    }\n  },\n\n  exportScripts () {\n    let scripts = getLocalStorageScripts()\n    if (!scripts) {\n      return Promise.reject(new Error('There are no scripts to export.'));\n    }\n    let zip = new JSZip();\n    Object.values(scripts).forEach(script => {\n      zip.file(`${script.name}.js`, script.text)\n    })\n    return zip.generateAsync({type:\"blob\"})\n        .then(function (blob) {\n          let dateTime = new Date().toISOString()\n                                   .replace(/:\\d\\d\\.\\d\\d\\dZ$/, '')\n                                   .replace(':', '_');\n          saveAs(blob, `Bustabit Scripts ${dateTime}.zip`);\n        });\n  },\n\n  exportScript (id) {\n    let scripts = getLocalStorageScripts()\n    let script = scripts[id]\n    let blob = new Blob([script.text], {type: \"text/plain;charset=utf-8\"});\n    saveAs(blob, `${script.name}.js`)\n  },\n\n  setClipboardContent (text) {\n    return navigator.clipboard.writeText(text)\n  },\n\n};\n\nexport default ScriptUtils\n","import CryptoJS from \"crypto-js\";\n\nfunction getUniqueID(existingIds) {\n  for (let attempt = 0; attempt < 3; attempt++) {\n    let id = String(CryptoJS.lib.WordArray.random(16))\n    if (!existingIds || existingIds.indexOf(id) === -1) {\n      return id\n    }\n  }\n}\n\nfunction capitalize (s) {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport { getUniqueID, capitalize };\n","const SCRIPT_SAMPLES = [\n  {\n    name: 'Flat Bet',\n    text: `var config = {\n  wager: {\n    value: 100,\n    type: \"balance\",\n    label: \"wager\",\n  },\n  payout: {\n    value: 2,\n    type: \"multiplier\",\n    label: \"payout\",\n  },\n};\n\n// Try to bet immediately when script starts\nif (engine.gameState === \"GAME_STARTING\" || engine.gameState === \"GAME_ENDED\") {\n  makeBet();\n}\n\nengine.on(\"GAME_STARTING\", onGameStarted);\nengine.on(\"GAME_ENDED\", onGameEnded);\n\nfunction onGameStarted() {\n  makeBet();\n}\n\nfunction onGameEnded() {\n  var lastGame = engine.history.first();\n\n  // If we wagered, it means we played\n  if (!lastGame.wager) {\n    return;\n  }\n\n  if (lastGame.cashedAt) {\n    var profit =\n      (config.wager.value * lastGame.cashedAt - config.wager.value) / 100;\n    log(\"we won\", profit.toFixed(2), \"bits\");\n  } else {\n    log(\"we lost\", Math.round(config.wager.value / 100), \"bits\");\n  }\n}\n\nfunction makeBet() {\n  engine.bet(config.wager.value, config.payout.value);\n  log(\n    \"betting\",\n    Math.round(config.wager.value / 100),\n    \"on\",\n    config.payout.value,\n    \"x\"\n  );\n}`\n  },\n  {\n    name: 'Sniper',\n    text: `var config = {\n  target: { value: \"\", type: \"text\", label: \"User to follow\" },\n  maxBet: { value: 1e8, type: \"balance\", label: \"Max Bet\" },\n};\n\nengine.on(\"BET_PLACED\", (bet) => {\n  if (bet.uname.toLowerCase() === config.target.value.toLowerCase()) {\n    if (userInfo.balance < 100) {\n      stop(\"Your balance is too low to bet.\");\n    }\n\n    log(\n      \"Spotted\",\n      bet.uname,\n      \"betting\",\n      bet.wager / 100,\n      \"bit(s) with a\",\n      bet.payout + \"x payout.\"\n    );\n\n    const bettableBalance = Math.floor(userInfo.balance / 100) * 100;\n    const wager = Math.min(bettableBalance, bet.wager, config.maxBet.value);\n\n    if (engine.gameState != \"GAME_STARTING\") {\n      // do not queue the bet if the current game is no longer accepting bets\n      return;\n    }\n\n    engine.bet(wager, bet.payout); // aim at target's payout\n  }\n});\n\nengine.on(\"CASHED_OUT\", (cashOut) => {\n  if (cashOut.uname.toLowerCase() === config.target.value.toLowerCase()) {\n    log(\"Spotted\", cashOut.uname, \"cashing out at\", cashOut.cashedAt + \"x.\");\n\n    if (engine.currentlyPlaying()) {\n      engine.cashOut();\n    }\n  }\n});`\n  },\n  {\n    name: 'Martingale',\n    text: `var config = {\n  baseBet: { value: 100, type: \"balance\", label: \"base bet\" },\n  payout: { value: 2, type: \"multiplier\" },\n  stop: { value: 1e8, type: \"balance\", label: \"stop if bet >\" },\n  loss: {\n    value: \"increase\",\n    type: \"radio\",\n    label: \"On Loss\",\n    options: {\n      base: { type: \"noop\", label: \"Return to base bet\" },\n      increase: { value: 2, type: \"multiplier\", label: \"Increase bet by\" },\n    },\n  },\n  win: {\n    value: \"base\",\n    type: \"radio\",\n    label: \"On Win\",\n    options: {\n      base: { type: \"noop\", label: \"Return to base bet\" },\n      increase: { value: 2, type: \"multiplier\", label: \"Increase bet by\" },\n    },\n  },\n};\n\nlog(\"Script is running..\");\n\nvar currentBet = config.baseBet.value;\n\nengine.on(\"GAME_STARTING\", onGameStarted);\nif (engine.gameState === \"GAME_STARTING\" || engine.gameState === \"GAME_ENDED\") {\n  engine.bet(roundBit(currentBet), config.payout.value);\n  engine.on(\"GAME_ENDED\", onGameEnded);\n} else {\n  engine.once(\"GAME_STARTING\", () => engine.on(\"GAME_ENDED\", onGameEnded));\n}\n\nfunction onGameStarted() {\n  engine.bet(roundBit(currentBet), config.payout.value);\n}\n\nfunction onGameEnded() {\n  var lastGame = engine.history.first();\n\n  // If we wagered, it means we played\n  if (!lastGame.wager) {\n    return;\n  }\n\n  // we won..\n  if (lastGame.cashedAt) {\n    if (config.win.value === \"base\") {\n      currentBet = config.baseBet.value;\n    } else {\n      console.assert(config.win.value === \"increase\");\n      currentBet *= config.win.options.increase.value;\n    }\n    log(\"We won, so next bet will be\", currentBet / 100, \"bits\");\n  } else {\n    // damn, looks like we lost :(\n    if (config.loss.value === \"base\") {\n      currentBet = config.baseBet.value;\n    } else {\n      console.assert(config.loss.value === \"increase\");\n      currentBet *= config.loss.options.increase.value;\n    }\n    log(\"We lost, so next bet will be\", currentBet / 100, \"bits\");\n  }\n\n  if (currentBet > config.stop.value) {\n    log(\"Was about to bet\", currentBet / 100, \"which triggers the stop\");\n    engine.removeListener(\"GAME_STARTING\", onGameStarted);\n    engine.removeListener(\"GAME_ENDED\", onGameEnded);\n  }\n}\n\nfunction roundBit(bet) {\n  return Math.round(bet / 100) * 100;\n}`\n  },\n  {\n    name: 'Payout Martingale',\n    text: `var config = {\n  bet: {\n    value: 100,\n    type: \"balance\",\n  },\n  basePayout: {\n    value: 2,\n    type: \"multiplier\",\n    label: \"base payout\",\n  },\n  stop: {\n    value: 20,\n    type: \"multiplier\",\n    label: \"stop if payout >\",\n  },\n  loss: {\n    value: \"increase\",\n    type: \"radio\",\n    label: \"On Loss\",\n    options: {\n      base: {\n        type: \"noop\",\n        label: \"Return to base payout\",\n      },\n      increase: {\n        value: 1,\n        type: \"multiplier\",\n        label: \"Increase payout by +\",\n      },\n    },\n  },\n  win: {\n    value: \"base\",\n    type: \"radio\",\n    label: \"On Win\",\n    options: {\n      base: {\n        type: \"noop\",\n        label: \"Return to base payout\",\n      },\n      increase: {\n        value: 1,\n        type: \"multiplier\",\n        label: \"Increase payout by +\",\n      },\n    },\n  },\n};\n\nlog(\"Script is running..\");\n\nvar currentPayout = config.basePayout.value;\n\nengine.on(\"GAME_STARTING\", onGameStarted);\nif (engine.gameState === \"GAME_STARTING\" || engine.gameState === \"GAME_ENDED\") {\n  engine.bet(roundBit(config.bet.value), currentPayout);\n  engine.on(\"GAME_ENDED\", onGameEnded);\n} else {\n  engine.once(\"GAME_STARTING\", () => engine.on(\"GAME_ENDED\", onGameEnded));\n}\n\nfunction onGameStarted() {\n  log(\n    \"betting\",\n    Math.round(config.bet.value / 100),\n    \"at payout of\",\n    currentPayout,\n    \"x\"\n  );\n  engine.bet(config.bet.value, currentPayout);\n}\n\nfunction onGameEnded(info) {\n  var lastGame = engine.history.first();\n\n  // If we wagered, it means we played\n  if (!lastGame.wager) {\n    return;\n  }\n\n  // we won..\n  if (lastGame.cashedAt) {\n    if (config.win.value === \"base\") {\n      currentPayout = config.basePayout.value;\n      log(\"won, so resetting payout to\", currentPayout);\n    } else {\n      console.assert(config.win.value === \"increase\");\n      currentPayout += config.win.options.increase.value;\n      log(\"won, so increasing payout to\", currentPayout);\n    }\n  } else {\n    // damn, looks like we lost :(\n    if (config.loss.value === \"base\") {\n      currentPayout = config.basePayout.value;\n      log(\"lost, so resetting payout to\", currentPayout);\n    } else {\n      console.assert(config.loss.value === \"increase\");\n      currentPayout += config.loss.options.increase.value;\n      log(\"lost, so increasing payout\", currentPayout);\n    }\n  }\n\n  if (currentPayout > config.stop.value) {\n    log(\n      \"Was about to bet with payout\",\n      currentPayout,\n      \"which triggers the stop\"\n    );\n    engine.removeListener(\"GAME_STARTING\", onGameStarted);\n    engine.removeListener(\"GAME_ENDED\", onGameEnded);\n  }\n}`\n  },\n\n];\n\nconst NEW_SCRIPT = {\n  id: '',\n  name: 'Untitled Script',\n  text: `var config = {\n\n};\n\nlog('Simulation begins here...')`,\n  config: undefined\n}\n\nconst ScriptConstants = {\n  SCRIPT_SAMPLES,\n  NEW_SCRIPT,\n}\nexport default ScriptConstants\n","import EventEmitter from 'events'\nimport CryptoJS from \"crypto-js\"\n\nfunction hashToBust(seed) {\n  const nBits = 52;\n  const hmac = CryptoJS.HmacSHA256(CryptoJS.enc.Hex.parse(seed), '0000000000000000004d6ec16dafe9d8370958664c1dc422f452892264c59526');\n  seed = hmac.toString(CryptoJS.enc.Hex);\n  seed = seed.slice(0, nBits / 4);\n  const r = parseInt(seed, 16);\n  let X = r / Math.pow(2, nBits);\n  X = 99 / (1 - X);\n  const result = Math.floor(X);\n  return Math.max(1, result / 100);\n}\n\nfunction hashToBusts(seed, amount) {\n  if (isNaN(amount) || amount <= 0) {\n    throw new TypeError('amount must be a number larger than zero.')\n  }\n  let prevHash = seed\n  const result = []\n  result.unshift({ hash: prevHash, bust: hashToBust(String(prevHash)) })\n  for (let index = 0; index < amount; index++) {\n    let hash = String(CryptoJS.SHA256(String(prevHash)))\n    let bust = hashToBust(hash)\n    result.unshift({ hash, bust })\n    prevHash = hash;\n  }\n  return result\n}\n\nclass SimulatedBustabitHistory {\n  constructor() {\n    this.data = []\n  }\n\n  get size() {\n    return this.data.length\n  }\n\n  get length() {\n    return this.data.length\n  }\n\n  get start() {\n    return 0\n  }\n\n  get end() {\n    return this.data.length - 1\n  }\n\n  first() {\n    return this.size > 0 ? this.data[0] : null;\n  }\n\n  last() {\n    return this.size > 0 ? this.data[this.size - 1] : null;\n  }\n\n  toArray() {\n    return this.data;\n  }\n}\n\nclass SimulatedBustabitEngine extends EventEmitter {\n\n  constructor() {\n    super()\n    this._userInfo = {\n      uname: 'Anonymous',\n      balance: 0,\n      balanceATH: 0,\n      balanceATL: 0,\n      winStreak: 0,\n      loseStreak: 0,\n      streakSum: 0,\n      sumWagers: 0,\n      highBet: 0,\n      lowBet: 0,\n      bets: 0,\n      profit: 0,\n      profitATH: 0,\n      profitATL: 0,\n      profitPerHour: 0,\n      duration: 0\n    }\n    this.history = new SimulatedBustabitHistory()\n    this.bet = this.bet.bind(this)\n  }\n\n  getCurrentBet() {\n    if (!this.next) return undefined;\n    return { wager: this.next.wager, payout: this.next.payout }\n  }\n\n  isBetQueued() {\n    return !!this.next\n  }\n\n  cancelQueuedBet() {\n    this.next = undefined\n  }\n\n  bet(wager, payout) {\n    // 'bet' returns a Promise, just like on bustabit\n    return new Promise((resolve, reject) => {\n      this.next = { wager, payout: Math.round(payout * 100) / 100, isAuto: true, resolve, reject }\n    }).catch(error => console.error(error));\n  }\n\n}\n\nfunction evalScript() {\n  const { config, engine, userInfo, log, stop, gameResultFromHash } = this // eslint-disable-line no-unused-vars\n  // eslint-disable-next-line\n  eval(arguments[0])\n}\n\nfunction simulate({ text, config, startingBalance, gameHash, gameAmount, drawChart, quickTest }) {\n  return new Promise((resolve, reject) => {\n    let logMessages = '',\n      shouldStop = false,\n      shouldStopReason = undefined;\n    const logFuncs = {\n      log: console.log,\n      warn: console.warn,\n      info: console.info,\n      error: console.error,\n      debug: console.debug\n    };\n    function noLog() { return; }\n    if (!quickTest) {\n      console.log = noLog;\n      console.warn = noLog;\n      console.info = noLog;\n      console.error = noLog;\n      console.debug = noLog;\n    }\n    const engine = new SimulatedBustabitEngine(),\n      userInfo = engine._userInfo,\n      log = (!quickTest ? () => { } : function () {\n        let msg = Array.prototype.slice.call(arguments);\n        logMessages += msg.join(' ') + '\\n'\n        msg.unshift('LOG:');\n        console.log(...msg);\n      }),\n      stop = function (reason) {\n        shouldStopReason = reason\n        shouldStop = true\n      },\n      gameResultFromHash = function (hash) {\n        return new Promise(resolve => resolve(hashToBust(hash)));\n      },\n      notify = function (message) {\n        log(message.toString())\n      };\n    userInfo.balance = startingBalance\n    userInfo.balanceATH = startingBalance\n    userInfo.balanceATL = startingBalance\n\n    const results = {\n      duration: 0,\n      startingBalance: startingBalance,\n      balance: startingBalance,\n      balanceATH: startingBalance,\n      balanceATL: startingBalance,\n      bets: 0,\n      profit: 0,\n      lowBet: 0,\n      highBet: 0,\n      winStreak: 0,\n      loseStreak: 0,\n      streakSum: 0,\n      profitPerHour: 0,\n      profitATH: 0,\n      profitATL: 0,\n      message: '',\n      history: engine.history.data,\n      log: logMessages\n    };\n    if (drawChart) {\n      Object.assign(results, { chartData: [] })\n    }\n\n    const context = { config, engine, userInfo, log, stop, gameResultFromHash, notify };\n    evalScript.call(context, text)\n\n    const games = hashToBusts(gameHash, gameAmount)\n    nextGame(null, -1, games)\n\n    function nextGame(id) {\n      id++\n      setImmediate(() => {\n        if (id < games.length && !shouldStop) {\n          doGame(id);\n        } else {\n          endSimulation();\n        }\n      });\n    }\n\n\n    function endSimulation() {\n      if (!!quickTest) {\n        console.log = logFuncs.log;\n        console.warn = logFuncs.warn;\n        console.info = logFuncs.info;\n        console.error = logFuncs.error;\n        console.debug = logFuncs.debug;\n      }\n      if (shouldStop && shouldStopReason) {\n        log(shouldStopReason)\n      }\n\n      if (userInfo.streakSum < userInfo.sumWagers) {\n        userInfo.streakSum = userInfo.sumWagers\n      }\n\n      results.duration = userInfo.duration;\n      results.startingBalance = startingBalance\n      results.balance = userInfo.balance\n      results.bets = userInfo.bets\n      results.profit = userInfo.profit\n      results.lowBet = userInfo.lowBet\n      results.highBet = userInfo.highBet\n      results.streakSum = userInfo.streakSum\n      results.loseStreak = userInfo.loseStreak\n      results.winStreak = userInfo.winStreak\n      results.profitATH = userInfo.profitATH\n      results.profitATL = userInfo.profitATL\n      results.balanceATH = userInfo.balanceATH\n      results.balanceATL = userInfo.balanceATL\n      results.profitPerHour = results.profit / (results.duration / (1000 * 60 * 60))\n      results.message = `${userInfo.bets} Games played. ${results.profit > 0 ? 'Won' : 'Lost'} ${(results.profit / 100)} bits. ${results.message || ''}`\n      results.history = engine.history.results\n      results.log = logMessages\n      resolve(results);\n    }\n\n    function doGame(id) {\n      const game = games[id]\n      game.id = id\n      game.isSimulation = true\n      game.wager = 0\n      game.cashedAt = 0\n\n      // set gameState, just like bustabit\n      engine.gameState = 'GAME_STARTING'\n      // emit event, just like bustabit\n      engine.emit('GAME_STARTING', { gameId: id })\n\n      // engine.next is set when engine.bet(wager, payout) is called\n      // probably just like bustabit\n      const bet = engine.next\n      engine.next = null\n\n      if (bet) {\n        // reject with specific strings, just like bustabit\n        if (isNaN(bet.wager) || bet.wager < 100 || (bet.wager % 100 !== 0)) {\n          bet.reject('INVALID_BET')\n          return endSimulation()\n        }\n        if (isNaN(bet.payout)) {\n          bet.reject('cannot parse JSON')\n          return endSimulation()\n        }\n        if (userInfo.balance - bet.wager < 0) {\n          bet.reject('BET_TOO_BIG')\n          userInfo.sumWagers += bet.wager;\n          return endSimulation()\n        }\n        if (bet.payout <= 1) {\n          bet.reject('payout is too low')\n          return endSimulation()\n        }\n\n        // decrease balance, just like bustabit\n\n        if (bet.wager > 0) {\n          userInfo.balance -= bet.wager;\n          userInfo.bets++;\n          userInfo.sumWagers += bet.wager;\n        }\n        // resolve with null, just like bustabit\n        bet.resolve(null);\n\n        // emit event, just like bustabit\n        engine.emit('BET_PLACED', {\n          uname: userInfo.uname,\n          wager: bet.wager,\n          payout: bet.payout\n        })\n      }\n\n      engine.emit('GAME_STARTED', null)\n\n      // set gameState, just like bustabit\n      engine.gameState = 'GAME_IN_PROGRESS'\n\n      // set wager and cashedAt, just like bustabit\n      // wager: zero when didn't bet\n      game.wager = bet ? bet.wager : 0\n      // cashedAt: zero when busted or didn't bet\n      game.cashedAt = bet && bet.wager > 0 && bet.payout <= game.bust ? bet.payout : 0\n\n      if (game.wager !== 0) {\n        // update balance, just like bustabit\n        userInfo.balance += game.cashedAt * game.wager\n        if (userInfo.balance < userInfo.balanceATL) { userInfo.balanceATL = userInfo.balance }\n        if (userInfo.balance > userInfo.balanceATH) { userInfo.balanceATH = userInfo.balance }\n        userInfo.profit = userInfo.balance - startingBalance\n        if (!userInfo.lowBet || game.wager < userInfo.lowBet) { userInfo.lowBet = game.wager }\n        if (!userInfo.highBet || game.wager > userInfo.highBet) { userInfo.highBet = game.wager }\n        if (userInfo.profit < userInfo.profitATL) { userInfo.profitATL = userInfo.profit }\n        if (userInfo.profit > userInfo.profitATH) { userInfo.profitATH = userInfo.profit }\n      }\n\n      if (game.cashedAt > 0) {\n        // won!\n        userInfo.sinceWin = 0\n        userInfo.sinceLose++\n        if (userInfo.sinceLose > userInfo.winStreak) {\n          userInfo.winStreak = userInfo.sinceLose\n        }\n        if (userInfo.streakSum < userInfo.sumWagers) {\n          userInfo.streakSum = userInfo.sumWagers\n        }\n        userInfo.sumWagers = 0;\n        // emit event, just like bustabit\n        engine.emit('CASHED_OUT', {\n          uname: userInfo.uname,\n          cashedAt: game.cashedAt,\n          wager: game.wager\n        })\n      } else {\n        if (game.wager !== 0) {\n          // lost\n          userInfo.sinceLose = 0\n          userInfo.sinceWin++\n          if (userInfo.sinceWin > userInfo.loseStreak) {\n            userInfo.loseStreak = userInfo.sinceWin\n          }\n        }\n      }\n\n      // add game to history, just like bustabit\n      engine.history.data.unshift(game)\n      // keep track of some extra data for the chart\n      if (drawChart) {\n        results.chartData.unshift(Object.assign({\n          payout: (bet ? bet.payout : 0),\n          balance: userInfo.balance,\n          profit: (game.cashedAt > 0 ? (game.cashedAt - 1) * game.wager : -game.wager)\n        }, game))\n      }\n      userInfo.duration += Math.log(game.bust) / 0.00006\n\n      // set gameState, just like bustabit\n      engine.gameState = 'GAME_ENDED'\n      // emit event, just like bustabit\n      engine.emit('GAME_ENDED', { hash: game.hash, bust: game.bust })\n\n      nextGame(id)\n    }\n  });\n}\n\n\nexport default simulate\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass BustabitScriptConfig extends Component {\n  constructor (props) {\n    super(props)\n    this.handleConfigFieldChange = this.handleConfigFieldChange.bind(this)\n  }\n\n  handleConfigFieldChange (key, value) {\n    let path = key.split('.')\n\n    let obj = this.props.config\n    for (let i = 0; i<path.length; i++) {\n      obj = obj[path[i]]\n    }\n    obj.value = value\n    this.props.onChange(this.props.config)\n  }\n\n  render () {\n    const { config, onChange, className = '', ...rest } = this.props\n    return (\n      <div {...rest} className={`BustabitScript Config ${className}`}>\n        {!config ? null : Object.keys(config).map((key) => {\n          let element = config[key]\n          let component = FieldTypes[element.type]\n          return component({\n            ...element,\n            name: key,\n            onChange: this.handleConfigFieldChange\n          })\n        })}\n      </div>\n    )\n  }\n}\n\nBustabitScriptConfig.propTypes = {\n  config: PropTypes.object,\n  onChange: PropTypes.func.isRequired,\n}\n\nconst FieldTypes = Object.freeze({\n  'balance': BalanceInput,\n  'checkbox': CheckboxInput,\n  'multiplier': MultiplierInput,\n  'noop': NoopInput,\n  'radio': RadioInput,\n  'text': TextInput,\n  'number': NumberInput,\n});\n\nfunction BalanceInput ({ name, label, value, optional, onChange }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field is-horizontal\" key={id}>\n      <div className=\"field-label is-normal\">\n        <label htmlFor={id} className=\"label\">{label || name}</label>\n      </div>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <div className=\"control has-icons-right\">\n            <input  type=\"number\"\n                    className=\"input is-normal\"\n                    id={id}\n                    name={name}\n                    value={parseFloat(value)/100}\n                    required={!optional}\n                    step=\"1\"\n                    onChange={function (eventInfo) {\n                      onChange(name, parseFloat(eventInfo.target.value) * 100)\n                    }}/>\n            <span className=\"icon is-small is-right\">\n              bits\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction CheckboxInput ({ name, label, value, onChange }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field is-horizontal\" key={id}>\n      <div className=\"field-label is-normal\">\n        <label htmlFor={id} className=\"label\">{label || name}</label>\n      </div>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <div className=\"control\">\n            <input  type=\"checkbox\"\n                    className=\"checkbox\"\n                    id={id}\n                    name={name}\n                    checked={!!value}\n                    onChange={function (eventInfo) {\n                      onChange(name, !!eventInfo.target.checked)\n                    }}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction MultiplierInput ({ name, label, value, optional, onChange }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field is-horizontal\" key={id}>\n      <div className=\"field-label is-normal\">\n        <label htmlFor={id} className=\"label\">{label || name}</label>\n      </div>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <div className=\"control has-icons-right\">\n            <input  type=\"number\"\n                    className=\"input\"\n                    id={id}\n                    name={name}\n                    value={parseFloat(value)}\n                    required={!optional}\n                    step=\"0.01\"\n                    onChange={function (eventInfo) {\n                      onChange(name, parseFloat(eventInfo.target.value))\n                    }}/>\n            <span className=\"icon is-small is-right\">\n              <i className=\"fas fa-times\"></i>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction NoopInput ({ name, label, value }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field\" key={id}>\n      <label  className=\"label\"\n              htmlFor={id}>\n        {label}\n      </label>\n    </div>\n  )\n}\n\nfunction RadioInput ({ name, label, value, options, onChange }) {\n  function optionFieldChange(name, value) {\n    onChange(name, value)\n  }\n  let id = `config.${name}`\n  return (\n    <div className=\"field\" key={id}>\n      <fieldset style={{width: \"100%\", padding: \"10px 10px\"}}>\n        <legend className=\"label has-text-centered is-uppercase\">\n          {label || name}\n        </legend>\n        {Object.keys(options || {}).map((key) => {\n          const option = options[key]\n          return (\n            <div key={`option-${key}`} className=\"field\">\n              <input  type=\"radio\"\n                      name={name}\n                      id={`config.${name}.options.${key}`}\n                      value={key/* TODO: shouldn't this be option.value ?*/}\n                      checked={value === key}\n                      onChange={function (eventInfo) {\n                        onChange(name, eventInfo.target.value)/* TODO: shouldn't this be option.value ?*/\n                      }}/>\n              &nbsp;\n              <div className=\"is-inline-block\">\n                {FieldTypes[option.type]({\n                  ...option,\n                  onChange: optionFieldChange,\n                  name: `${name}.options.${key}`\n                })}\n              </div>\n            </div>\n          )\n        })}\n      </fieldset>\n    </div>\n  )\n}\n\nfunction TextInput ({ name, label, value, optional, onChange }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field is-horizontal\" key={id}>\n      <div className=\"field-label is-normal\">\n        <label htmlFor={id} className=\"label\">{label || name}</label>\n      </div>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <div className=\"control\">\n            <input  type=\"text\"\n                    className=\"input\"\n                    id={id}\n                    name={name}\n                    value={value}\n                    required={!optional}\n                    onChange={function (eventInfo) {\n                      onChange(name, eventInfo.target.value)\n                    }}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction NumberInput ({ name, label, value, optional, onChange }) {\n  let id = `config.${name}`\n  return (\n    <div className=\"field is-horizontal\" key={id}>\n      <div className=\"field-label is-normal\">\n        <label htmlFor={id} className=\"label\">{label || name}</label>\n      </div>\n      <div className=\"field-body\">\n        <div className=\"field\">\n          <div className=\"control\">\n            <input  type=\"number\"\n                    className=\"input\"\n                    id={id}\n                    name={name}\n                    value={parseFloat(value)}\n                    required={!optional}\n                    step=\"1\"\n                    onChange={function (eventInfo) {\n                      onChange(name, parseFloat(eventInfo.target.value))\n                    }}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default BustabitScriptConfig\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport ReactDOM from \"react-dom\";\nimport * as d3 from 'd3';\n\nimport './LineChart.sass';\n\nclass LineChart extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      tooltipData: undefined\n    }\n\n    this.handleTooltipChange    = this.handleTooltipChange.bind(this)\n    this.shouldUpdateLineChart  = this.shouldUpdateLineChart.bind(this)\n    this.updateLineChart        = this.updateLineChart.bind(this)\n  }\n\n  componentDidMount () {\n    this.container = ReactDOM.findDOMNode(this)\n    this.updateLineChart()\n  }\n\n  componentDidUpdate (prevProps, prevState) {\n    if (this.shouldUpdateLineChart(prevProps)) {\n      this.updateLineChart()\n    }\n  }\n\n  render () {\n    const {\n      viewBoxWidth, viewBoxHeight,\n      data, xAccessor, yAccessor,\n      crosshairEnabled, crosshairClassName,\n      className = '', ...rest } = this.props\n    return (\n      <div {...rest} className={`LineChart ${className}`}>\n        <svg preserveAspectRatio=\"xMinYMin meet\"></svg>\n        <div className=\"tooltip-container\" style={{ visibility: (this.state.tooltipData ? undefined : 'hidden')}}>\n          <Tooltip className=\"tooltip\" data={this.state.tooltipData}/>\n        </div>\n      </div>\n    )\n  }\n\n  handleTooltipChange ({ data }) {\n    this.setState({ tooltipData: data })\n  }\n\n  shouldUpdateLineChart(prevProps) {\n    const didChange = (propName) => {\n      let prev = prevProps[propName],\n          current = this.props[propName];\n      return prev !== current || (Array.isArray(prev) && prev.length !== current.length);\n    }\n    const lineChartProps = [\n      'viewBoxWidth', 'viewBoxHeight',\n      'data', 'xAccessor', 'yAccessor'\n    ]\n    return lineChartProps.some(didChange)\n  }\n\n  updateLineChart () {\n    d3LineChart({\n      container: this.container,\n\n      viewBoxWidth: this.props.viewBoxWidth,\n      viewBoxHeight: this.props.viewBoxHeight,\n\n      onTooltipChange: this.handleTooltipChange,\n\n      data: this.props.data,\n      xAccessor: this.props.xAccessor,\n      yAccessor: this.props.yAccessor,\n\n      crosshairEnabled: this.props.crosshairEnabled,\n      crosshairClassName: this.props.crosshairClassName,\n    })\n  }\n}\n\nLineChart.propTypes = {\n  viewBoxWidth: PropTypes.number.isRequired,\n  viewBoxHeight: PropTypes.number.isRequired,\n  data: PropTypes.array.isRequired,\n  xAccessor: PropTypes.func.isRequired,\n  yAccessor: PropTypes.func.isRequired,\n  crosshairEnabled: PropTypes.bool,\n  crosshairClassName: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n}\n\nclass Tooltip extends Component {\n  render () {\n    const { data, ...wrapper} = this.props\n    const { id, hash, bust, wager, payout, cashedAt, profit, balance } = data || {}\n    return (\n      <div  {...wrapper}>\n        {data && (\n          <table className=\"table is-transparent\">\n            <tbody>\n              <tr>\n                <th>Game ID</th>\n                <td>{id}</td>\n              </tr>\n              <tr>\n                <th>Hash</th>\n                <td><input className=\"input\" type=\"text\" value={hash} readOnly={true}/></td>\n              </tr>\n              <tr>\n                <th>Bust</th>\n                <td>{`${bust}x`}</td>\n              </tr>\n              <tr>\n                <th>Bet</th>\n                <td>{wager === 0 ? 'Didn\\'t play' : `${payout}x ${Math.round(wager)/100} bits`}</td>\n              </tr>\n              <tr>\n                <th>Cashed At</th>\n                <td>{cashedAt > 0 ? `${cashedAt}x` : '-'}</td>\n              </tr>\n              <tr>\n                <th>Profit</th>\n                <td className={profit === 0 ? 'has-text-warning' : (profit > 0 ? 'has-text-success' : 'has-text-danger')}>{Math.round(profit)/100} bits</td>\n              </tr>\n              <tr>\n                <th>Balance</th>\n                <td>{Math.round(balance)/100} bits</td>\n              </tr>\n            </tbody>\n          </table>\n        )}\n      </div>\n    )\n  }\n}\n\nfunction d3LineChart ({\n  container,\n  viewBoxWidth,\n  viewBoxHeight,\n  data,\n  xAccessor,\n  yAccessor,\n  onTooltipChange,\n  crosshairEnabled,\n  crosshairClassName\n}) {\n  if (!container) {\n    throw new TypeError('container should be an HTMLElement')\n  }\n  if (isNaN(viewBoxWidth) || isNaN(viewBoxHeight)) {\n    throw new TypeError('viewBoxWidth and viewBoxHeight should be numbers')\n  }\n  if (!xAccessor || !yAccessor || typeof(xAccessor) !== 'function' || typeof(yAccessor) !== 'function') {\n    throw new TypeError('xAccessor and yAccessor should be functions')\n  }\n  if (!data || !Array.isArray(data)) {\n    throw new TypeError('data should be an array')\n  }\n  if (onTooltipChange && typeof(onTooltipChange) !== 'function') {\n    throw new TypeError('onTooltipChange should be a function')\n  }\n  if (crosshairEnabled && crosshairClassName\n    && typeof(crosshairClassName) !== 'string'\n    && typeof(crosshairClassName) !== 'function') {\n    throw new TypeError('crosshairClassName should be a string or a function')\n  }\n\n  container = d3.select(container)\n  const svgElement = container.select('svg')\n  if (!svgElement) { throw new TypeError('container should have a child <svg></svg>'); }\n  let tooltipElement = container.select('.tooltip')\n\n  svgElement\n    .attr(\"viewBox\", `0 0 ${viewBoxWidth} ${viewBoxHeight}`);\n\n  const margin = {top: 20, right: 20, bottom: 110, left: 40},\n        margin2 = {top: 430, right: 20, bottom: 30, left: 40},\n        width = +viewBoxWidth - margin.left - margin.right,\n        height = +viewBoxHeight - margin.top - margin.bottom,\n        height2 = +viewBoxHeight - margin2.top - margin2.bottom;\n\n  svgElement.selectAll('*').remove()\n\n  const xScale  = d3.scaleLinear().range([0, width]),\n        xScale2 = d3.scaleLinear().range([0, width]),\n        yScale  = d3.scaleLinear().range([height, 0]),\n        yScale2 = d3.scaleLinear().range([height2, 0]);\n\n  const xAxis = d3.axisBottom(xScale),\n        xAxis2 = d3.axisBottom(xScale2),\n        yAxis = d3.axisLeft(yScale).tickFormat(function (n) { return (Math.round(n)/100) });\n\n  // line\n  var lineX = function (d) { return xScale(xAccessor(d)); }\n  var lineY = function (d) { return yScale(yAccessor(d)); }\n  var line = d3.line().x(lineX).y(lineY);\n\n  var line2X = function (d) { return xScale2(xAccessor(d)); }\n  var line2Y = function (d) { return yScale2(yAccessor(d)); }\n  var line2 = d3.line().x(line2X).y(line2Y);\n\n  var selected;\n  var brush = d3.brushX()\n      .extent([[0, 0], [width, height2]])\n      .on(\"brush end\", brushed);\n\n  var zoom = d3.zoom()\n      .scaleExtent([1, Infinity])\n      .translateExtent([[0, 0], [width, height]])\n      .extent([[0, 0], [width, height]])\n      .on(\"zoom\", zoomed);\n\n\n\n  // create svg elements\n\n  svgElement.append(\"defs\").append(\"svg:clipPath\")\n      .attr(\"id\", \"clip\")\n      .append(\"svg:rect\")\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"x\", 0)\n      .attr(\"y\", 0);\n\n\n  var g_lines = svgElement.append(\"g\")\n      .attr(\"class\", \"data-lines\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      .attr(\"clip-path\", \"url(#clip)\");\n\n  var crosshairElement;\n  if (crosshairEnabled) {\n    crosshairElement = svgElement.append(\"g\")\n    crosshairElement.attr(\"class\", \"crosshair\")\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                    .attr(\"clip-path\", \"url(#clip)\");\n    crosshairElement.append(\"line\")\n                    .attr(\"class\", \"crosshair-line crosshair-line-x\")\n    crosshairElement.append(\"line\")\n                    .attr(\"class\", \"crosshair-line crosshair-line-y\")\n  }\n\n  var g_axes = svgElement.append(\"g\")\n      .attr(\"class\", \"axes\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  var context = svgElement.append(\"g\")\n      .attr(\"class\", \"context\")\n      .attr(\"transform\", \"translate(\" + margin2.left + \",\" + margin2.top + \")\");\n\n\n  var overlay = svgElement.append(\"rect\")\n    .attr(\"class\", \"zoom\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n\n  withData(data)\n\n  function withData(data) {\n\n    xScale.domain(d3.extent(data, xAccessor));\n    yScale.domain(d3.extent(data, yAccessor));\n    xScale2.domain(xScale.domain());\n    yScale2.domain(yScale.domain());\n\n    g_axes.append(\"g\")\n          .attr(\"class\", \"axis axis-x\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(xAxis);\n\n    g_axes.append(\"g\")\n          .attr(\"class\", \"axis axis-y\")\n          .call(yAxis);\n\n\n    g_lines.append(\"path\")\n           .datum(data)\n           .attr(\"class\", \"data-line\")\n           .attr(\"d\", line);\n\n    g_lines.selectAll(\".data-point\")\n           .data(data)\n           .enter().append(\"circle\")\n           .attr(\"class\", function (d) { return \"data-point \" + (d.profit === 0 ? 'is-warning' : (d.profit > 0 ? 'is-success' : 'is-danger')) })\n           .attr(\"cx\", lineX)\n           .attr(\"cy\", lineY)\n           .attr(\"r\", 0)\n\n    context.append(\"path\")\n           .datum(data)\n           .attr(\"class\", \"data-line\")\n           .attr(\"d\", line2);\n\n    context.append(\"g\")\n           .attr(\"class\", \"axis axis-x\")\n           .attr(\"transform\", \"translate(0,\" + height2 + \")\")\n           .call(xAxis2);\n\n    context.append(\"g\")\n           .attr(\"class\", \"brush\")\n           .call(brush)\n           .call(brush.move, xScale.range());\n\n    overlay.call(zoom);\n    overlay.on(\"mousemove\",mousemove)\n      .on(\"mouseover\", function () {\n        if (tooltipElement) {\n          tooltipElement.style(\"opacity\", 1);\n        }\n        if (crosshairElement) {\n          crosshairElement.style(\"opacity\", 1);\n        }\n      })\n      .on(\"mouseout\", function () {\n        if (tooltipElement) {\n          tooltipElement.style(\"opacity\", 0);\n        }\n        if (crosshairElement) {\n          crosshairElement.style(\"opacity\", 0);\n        }\n        g_lines.selectAll('.data-point')\n         .classed('hover', false)\n      });\n\n    let bisect = d3.bisector(function (d, dx) { return dx - xAccessor(d) }).left\n\n    function mousemove () {\n\n      const mousex = d3.mouse(this)[0],\n            dx = xScale.invert(mousex),\n            i = bisect(data, dx),\n            d0 = data[i - 1],\n            d1 = data[i];\n\n      let d;\n      if (!d1) d = d0;\n      else if (!d0) d = d1;\n      else d = Math.abs(dx - xAccessor(d1)) > Math.abs(dx - xAccessor(d0)) ? d0 : d1;\n\n      selected = d\n\n      g_lines.selectAll('.data-point')\n         .classed('hover', (d) => xAccessor(d) === xAccessor(selected))\n      moveCrosshair(selected)\n      moveTooltip(d)\n    }\n  }\n\n  function moveTooltip (d) {\n    if (tooltipElement && svgElement && container && viewBoxWidth && viewBoxHeight) {\n      let svgMouse = d3.mouse(svgElement.node()),\n          containerMouse = d3.mouse(container.node());\n\n      let tooltipX, tooltipY;\n      const tooltipOffset = {\n        left: 25,\n        top: 25\n      }\n      const tooltipSize = tooltipElement.node().getBoundingClientRect()\n      if (svgMouse[0] > viewBoxWidth - tooltipSize.width) {\n        tooltipX = containerMouse[0] - tooltipSize.width - tooltipOffset.left\n      } else {\n        tooltipX = containerMouse[0] + tooltipOffset.left\n      }\n\n      if (svgMouse[1] > viewBoxHeight - tooltipSize.height) {\n        tooltipY = containerMouse[1] - tooltipSize.height - tooltipOffset.top\n      } else {\n        tooltipY = containerMouse[1] + tooltipOffset.top\n      }\n      /*\n      if (overlayMouse[0] > width/2) {\n        tooltipX = containerMouse[0] - tooltipElement.node().getBoundingClientRect().width - tooltipOffset.left\n      } else {\n        tooltipX = containerMouse[0] + tooltipOffset.left\n      }\n      if (overlayMouse[1] > height/2) {\n        tooltipY = containerMouse[1] + tooltipOffset.top\n      } else {\n        tooltipY = containerMouse[1] - tooltipElement.node().getBoundingClientRect().height - tooltipOffset.top\n      }*/\n\n\n      tooltipElement\n        .style('top', tooltipY + 'px')\n        .style('left', tooltipX + 'px')\n\n      if (onTooltipChange) {\n        onTooltipChange({ data: d })\n      }\n    }\n  }\n\n  function moveCrosshair(d) {\n    let xdomain = xScale.domain()\n    let ydomain = yScale.domain()\n    crosshairElement\n      .select('.crosshair-line-x')\n      .transition()\n      .ease(d3.easeLinear)\n      .attr('x1', lineX(d)).attr('y1', yScale(ydomain[0]))\n      .attr('x2', lineX(d)).attr('y2', yScale(ydomain[1]))\n      .duration(100);\n    crosshairElement\n      .select('.crosshair-line-y')\n      .transition()\n      .ease(d3.easeLinear)\n      .attr('x1', xScale(xdomain[0])).attr('y1', lineY(d))\n      .attr('x2', xScale(xdomain[1])).attr('y2', lineY(d))\n      .duration(100);\n  }\n\n\n  function brushed() {\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === \"zoom\") return; // ignore brush-by-zoom\n    var s = d3.event.selection || xScale2.range();\n    xScale.domain(s.map(xScale2.invert, xScale2));\n\n    g_lines.select(\".data-line\")\n      .attr(\"d\", line);\n    g_lines.selectAll(\".data-point\")\n      .attr(\"cx\", lineX)\n      .attr(\"cy\", lineY);\n\n    if (selected) moveCrosshair(selected);\n\n    g_axes.select(\".axis-x\").call(xAxis);\n    svgElement.select(\".zoom\").call(zoom.transform, d3.zoomIdentity\n      .scale(width / (s[1] - s[0]))\n      .translate(-s[0], 0));\n  }\n\n  function zoomed() {\n    if (d3.event.sourceEvent && d3.event.sourceEvent.type === \"brush\") return; // ignore zoom-by-brush\n    var t = d3.event.transform;\n    xScale.domain(t.rescaleX(xScale2).domain());\n\n    g_lines.select(\".data-line\")\n      .attr(\"d\", line);\n    g_lines.selectAll(\".data-point\")\n      .attr(\"cx\", lineX)\n      .attr(\"cy\", lineY)\n\n    if (selected) moveCrosshair(selected);\n\n    g_axes.select(\".axis-x\").call(xAxis);\n    context.select(\".brush\").call(brush.move, xScale.range().map(t.invertX, t));\n  }\n\n}\n\nexport default LineChart\n","import React, { Component } from \"react\";\nimport './OptionsMenu.sass'\n\nclass OptionsMenu extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      isOpen: false\n    };\n\n    this.handleWindowClick = this.handleWindowClick.bind(this);\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n  }\n\n  componentDidMount () {\n    window.addEventListener('click', this.handleWindowClick)\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.handleWindowClick)\n  }\n\n  handleWindowClick () {\n    // close the menu\n    this.setState({ isOpen: false })\n  }\n\n  handleButtonClick (event) {\n    // don't let the window receive the click event\n    event.stopPropagation();\n    // open/close the menu\n    this.setState(prevState => {\n      return { isOpen: !prevState.isOpen }\n    });\n  }\n\n  render () {\n    let { children, className = '', style, ...rest } = this.props;\n    return (\n      <div\n        {...rest}\n        className={this.classNames('OptionsMenu is-relative', className, !children && 'is-hidden')}>\n        <CircularIconButton\n          iconClassName={'fas fa-ellipsis-v'}\n          onClick={this.handleButtonClick}/>\n        {/* Submenu */}\n        <div\n          style={{ position: 'absolute', zIndex: 10 }}\n          className={this.classNames('box p-1', !this.state.isOpen && 'is-hidden')}>\n          {children}\n        </div>\n      </div>\n    )\n  }\n\n  classNames(...classNames) {\n    return classNames.filter(className => !!className)\n      .map(className => className.toString())\n      .join(' ')\n      .replace(/\\s+/g, ' ')\n      .trim();\n  }\n}\n\nfunction CircularIconButton (props) {\n  let { children, className = '', iconClassName = 'fas fa-ellipsis-v', ...rest } = props;\n  return (\n    <button {...rest}\n            className={`button is-circular ${className}`}>\n      <span className={\"icon\"}>\n        <i className={iconClassName}/>\n      </span>\n      {children}\n    </button>\n  )\n}\n\nfunction OptionsMenuItem (props) {\n  let { children, iconClassName = '', className = '', onClick, ...rest } = props\n  return (\n    <div {...rest}\n         className={`p-0 ${className}`.trim()}>\n      <button className=\"button is-fullwidth is-justify-content-left\"\n              onClick={onClick}>\n        <span className={\"icon\"}><i className={iconClassName}/></span>\n        <span>{children}</span>\n      </button>\n    </div>\n  )\n}\n\nexport { OptionsMenu, OptionsMenuItem }\n","import React, { Component } from 'react';\nimport Config from './BustabitScriptConfig';\nimport LineChart from './LineChart'\nimport { OptionsMenu, OptionsMenuItem } from './OptionsMenu';\nimport PropTypes from 'prop-types'\nimport './BustabitScript.sass'\nimport {version} from \"../../../package.json\";\n\nclass App extends Component {\n\n  viewState() {\n    if (this.props.scripts.editing) {\n      return 'edit'\n    }\n    if (this.props.scripts.creating) {\n      return 'new'\n    }\n    if (this.props.scripts.deleting) {\n      return 'delete'\n    }\n    if (this.props.scripts.selected) {\n      return 'show'\n    }\n    return 'list'\n  }\n\n  componentDidMount() {\n    this.props.scripts.load()\n  }\n\n  render() {\n    const viewState = this.viewState();\n    const { scripts, className = '', ...rest } = this.props;\n    return (\n      <div {...rest} className={`BustabitScript-App ${className}`.trim()}>\n        {(viewState === 'list' || viewState === 'delete') && (\n          <List\n            scripts={scripts} />\n        )}\n        {viewState === 'edit' && (\n          <Edit\n            script={scripts.editing}\n            error={scripts.updateError}\n            onCancel={scripts.onCancel}\n            onRestore={scripts.onRestore}\n            onSave={scripts.onSave} />\n        )}\n        {viewState === 'new' && (\n          <New\n            script={scripts.creating}\n            error={scripts.createError}\n            onCancel={scripts.onCancel}\n            onSave={scripts.onSave} />\n        )}\n        {viewState === 'show' && (\n          <Show\n            scripts={scripts} />\n        )}\n      </div>\n    )\n  }\n}\n\nclass Title extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <div {...rest} className={`${className}`}>\n        <p>\n          <span className=\"bustabit-logo\" />\n          <span className=\"bustabit-title\">\n            Bustabit\n          </span>\n        </p>\n        <p>\n          <span className=\"script-simulator-title\">\n            Script Simulator\n          </span>\n          <span className=\"ml-1\"></span>\n          <span className=\"script-simulator-version\">v{version}</span>\n        </p>\n      </div>\n    )\n  }\n}\n\nclass List extends Component {\n  render() {\n    const { className = '', scripts, ...rest } = this.props;\n    let deletingId = scripts.deleting ? scripts.deleting.id : undefined;\n    return (\n      <div {...rest} className={`BustabitScript-List is-inline-block ${className}`.trim()}>\n        <div className={\"box has-text-left\"}>\n          <table className=\"table is-transparent\">\n            <thead>\n              <tr>\n                <th colSpan=\"4\">\n                  <h3 className=\"subtitle is-4 is-inline-block m-0\">\n                    My Scripts\n                  </h3>\n                  <div className={\"is-pulled-right\"}>\n                    <OptionsMenu\n                      className={\"is-inline-block\"}>\n                      <OptionsMenuItem\n                          iconClassName={\"fas fa-file-export\"}\n                          onClick={scripts.exportScripts}>\n                        Export All Scripts\n                      </OptionsMenuItem>\n                      <OptionsMenuItem\n                          iconClassName={\"fas fa-undo\"}\n                          onClick={scripts.restoreSamples}>\n                        Restore Sample Scripts\n                      </OptionsMenuItem>\n                    </OptionsMenu>\n                    <NewButton\n                      className={\"is-inline-block ml-1\"}\n                      onClick={() => scripts.onNew()} />\n                  </div>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {scripts.items.entrySeq().map(([, script]) => {\n                let id = script.id;\n                if (id === deletingId) {\n                  return (\n                    <tr key={id}>\n                      <th>{script.name}</th>\n                      <td colSpan=\"3\" style={{ maxWidth: '9rem' }}>\n                        <Delete key={id}\n                          script={scripts.deleting}\n                          onCancel={scripts.onCancel}\n                          onDeleted={scripts.onDeleted} />\n                      </td>\n                    </tr>\n                  )\n                }\n                return (\n                  <tr key={id}>\n                    <th>{script.name}</th>\n                    <td>\n                      <SelectButton\n                        onClick={() => scripts.onSelect(id)} />\n                    </td>\n                    <td>\n                      <EditButton\n                        onClick={() => scripts.onEdit(id)} />\n                    </td>\n                    <td>\n                      <DeleteButton\n                        onClick={() => scripts.onDelete(id)} />\n                    </td>\n                  </tr>\n                )\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction msToTime(duration) {\n  let seconds = Math.floor((duration / 1000) % 60),\n    minutes = Math.floor((duration / (1000 * 60)) % 60),\n    hours = Math.floor((duration / (1000 * 60 * 60)) % 24),\n    days = Math.floor(duration / (1000 * 60 * 60 * 24));\n\n  hours = (hours < 10) ? \"0\" + hours : hours;\n  minutes = (minutes < 10) ? \"0\" + minutes : minutes;\n  seconds = (seconds < 10) ? \"0\" + seconds : seconds;\n\n  return (days > 0 ? days + \"d \" : \"\") + hours + \"h \" + minutes + \"m \" + seconds + \"s\";\n}\n\nclass Show extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      script: props.scripts.selected,\n      startingBalance: 1000000,\n      gameHash: '7edbd07968e771f205a4e2b67701c2f6993437db0c557160ba79ee70ea6d10c6',\n      gameAmount: 1000,\n      drawChart: true,\n      quickTest: true,\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.scripts.results !== prevProps.scripts.results) {\n      let resultsElement = document.getElementById(\"results\");\n      if (resultsElement) {\n        const y = resultsElement.getBoundingClientRect().top + window.scrollY;\n        window.scrollTo({ behavior: 'smooth', top: y })\n      }\n    }\n  }\n\n  render() {\n    const { className = '', scripts, ...rest } = this.props;\n    return (\n      <div {...rest} className={`BustabitScript-Show ${className}`}>\n        {this.state.script && (\n          <div key={this.state.script.id}>\n            <div className=\"box is-inline-block has-text-left\">\n              <div>\n                <GoBackButton\n                  className={`${scripts.isLoading ? 'is-loading' : ''}`}\n                  onClick={scripts.onDeselect} />\n                <div className=\"is-pulled-right pr-4\">\n                  <OptionsMenu\n                    className={\"is-inline-block\"}>\n                    <OptionsMenuItem\n                      iconClassName={\"fas fa-file-export\"}\n                      onClick={() => scripts.exportScript(this.state.script.id)}>\n                      Export Script\n                    </OptionsMenuItem>\n                    <OptionsMenuItem\n                      iconClassName={\"fas fa-copy\"}\n                      onClick={() => scripts.copyScript(this.state.script.id)}>\n                      Copy Script\n                    </OptionsMenuItem>\n                  </OptionsMenu>\n                  <EditButton\n                      className={\"is-inline-block ml-1\"}\n                      onClick={() => scripts.onEdit(this.state.script.id)} />\n                </div>\n              </div>\n              <hr className=\"hr\" />\n              <Config\n                config={this.state.script.config}\n                onChange={config => {\n                  this.setState(({ script }) => {\n                    script.config = config;\n                    return { script }\n                  })\n                }} />\n              <hr className=\"hr\" />\n              <Control label=\"Starting Balance\"\n                icon=\"fas fa-coins\">\n                <input className=\"input is-normal\"\n                  type=\"number\" required={true}\n                  min=\"1\" step=\"1\"\n                  name=\"startingBalance\"\n                  value={this.state.startingBalance / 100}\n                  onChange={(event) => {\n                    let changes = { [event.target.name]: parseFloat(event.target.value) * 100 };\n                    this.setState(changes)\n                  }} />\n              </Control>\n              <Control label=\"Hash\"\n                icon=\"fas fa-key\">\n                <input className=\"input is-normal\"\n                  type=\"text\" required={true}\n                  name=\"gameHash\"\n                  value={this.state.gameHash}\n                  onChange={(event) => {\n                    this.setState({ [event.target.name]: String(event.target.value) })\n                  }} />\n              </Control>\n\n              <Control label=\"Games\"\n                icon=\"fas fa-hashtag\">\n                <input className=\"input is-normal\"\n                  type=\"number\" required={true}\n                  min=\"1\" step=\"1\"\n                  name=\"gameAmount\"\n                  value={this.state.gameAmount}\n                  onChange={(event) => {\n                    this.setState({ [event.target.name]: parseInt(event.target.value) })\n                  }} />\n              </Control>\n              <hr className=\"hr\" />\n              <div className=\"field is-grouped\">\n                <div className=\"control\">\n                  <button className={`button is-success ${scripts.isLoading ? 'is-loading' : ''}`}\n                    disabled={!(\n                      this.state.script &&\n                      this.state.gameHash &&\n                      this.state.gameAmount &&\n                      this.state.startingBalance\n                    )}\n                    onClick={() => {\n                      let args = {\n                        script: this.state.script,\n                        gameHash: this.state.gameHash,\n                        gameAmount: this.state.gameAmount,\n                        startingBalance: this.state.startingBalance,\n                        drawChart: this.state.drawChart,\n                        quickTest: this.state.quickTest,\n                      };\n                      scripts.onRun(args)\n                    }}>\n                    Run Script\n                  </button>\n                </div>\n                <div className=\"control\">\n                  <p>\n                    <label className=\"checkbox\">\n                      <input className=\"checkbox\"\n                        type=\"checkbox\"\n                        name=\"drawChart\"\n                        checked={this.state.drawChart}\n                        onChange={(event) => {\n                          this.setState({ [event.target.name]: Boolean(event.target.checked) })\n                        }} />\n                    &nbsp;\n                    Enable Chart\n                  </label>\n                  </p><p>\n                    <label className=\"checkbox\">\n                      <input className=\"checkbox\"\n                        type=\"checkbox\"\n                        name=\"quickTest\"\n                        checked={this.state.quickTest}\n                        onChange={(event) => {\n                          this.setState({ [event.target.name]: Boolean(event.target.checked) })\n                        }} />\n                    &nbsp;\n                    Enable Log\n                  </label>\n                  </p>\n                </div>\n              </div>\n              <div>\n                <textarea className=\"textarea\"\n                  value={scripts.results ? scripts.results.log : undefined}\n                  readOnly={true}\n                  style={{ width: '100%', height: '200px', resize: 'both' }}\n                  placeholder=\"Script logs will appear here\">\n                </textarea>\n              </div>\n            </div>\n          </div>\n        )}\n        {scripts.selected && scripts.results && (\n          <section className=\"section\">\n            <div id=\"results\" />\n            {scripts.results.error && (\n              <div className=\"notification is-danger\">\n                <h3 className=\"is-3\">Error</h3>\n                <pre className=\"notification is-danger has-text-left\">\n                  {String(scripts.results.error)}\n                </pre>\n              </div>\n            )}\n            {!scripts.results.error && (\n              <div className=\"columns\">\n                <div className=\"column is-one-fifth\">\n                  <table className={\"table box is-inline-block\"}>\n                    <tbody>\n                      <tr>\n                        <th>Games Played</th>\n                        <td>{scripts.results.bets} games</td>\n                      </tr>\n                      <tr>\n                        <th>Duration</th>\n                        <td>{msToTime(scripts.results.duration)}</td>\n                      </tr>\n                      <tr>\n                        <th>Start Balance</th>\n                        <td>{scripts.results.startingBalance / 100} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Smallest Bet</th>\n                        <td>{scripts.results.lowBet / 100} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Largest Bet</th>\n                        <td>{scripts.results.highBet / 100} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Win Streak</th>\n                        <td>{scripts.results.winStreak} games</td>\n                      </tr>\n                      <tr>\n                        <th>Lose Streak</th>\n                        <td>{scripts.results.loseStreak} games</td>\n                      </tr>\n                      <tr>\n                        <th>Streak Cost</th>\n                        <td>{scripts.results.streakSum / 100} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Profit ATL</th>\n                        <td>{(scripts.results.profitATL / 100).toFixed(2)} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Profit ATH</th>\n                        <td>{(scripts.results.profitATH / 100).toFixed(2)} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Balance ATL</th>\n                        <td>{(scripts.results.balanceATL / 100).toFixed(2)} bits</td>\n                      </tr>\n                      <tr>\n                        <th>Balance ATH</th>\n                        <td>{(scripts.results.balanceATH / 100).toFixed(2)} bits</td>\n                      </tr>\n                      <tr>\n                        <th>End Profit</th>\n                        <td className={`${scripts.results.profit >= 0 ? 'has-text-success' : 'has-text-danger'}`}>{(Math.round(scripts.results.profit) / 100).toFixed(2)} bits</td>\n                      </tr>\n                      <tr>\n                        <th>End Balance</th>\n                        <td>{scripts.results.balance / 100} bits</td>\n                      </tr>\n                      {scripts.results.profit > 0 && (\n                        <tr>\n                          <th>Profit per hour</th>\n                          <td>{Math.round(scripts.results.profitPerHour) / 100} bits</td>\n                        </tr>\n                      )}\n                      <tr>\n                        <td colSpan=\"2\">{scripts.results.message || ''}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n                {scripts.results.chartData && (\n                  <div className=\"column\">\n                    <div className=\"has-text-centered box\">\n                      <LineChart {...{\n                        viewBoxWidth: 960,\n                        viewBoxHeight: 500,\n                        data: scripts.results.chartData,\n                        xAccessor: (d) => { return d.id },\n                        yAccessor: (d) => { return d.balance },\n                        crosshairEnabled: true,\n                        crosshairClassName: (d) => { return d.profit > 0 ? 'is-success' : 'is-danger' },\n                      }} />\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n            <BackToTopButton />\n          </section>\n        )}\n      </div>\n    )\n  }\n}\n\nclass Delete extends Component {\n  render() {\n    return (\n      <div>\n        {!this.props.script ? null : (\n          <div>\n            <p>\n              Are you sure you want to delete this script?\n            </p>\n            <div className=\"buttons is-pulled-right\">\n              <button\n                className=\"button is-danger\"\n                onClick={() => {\n                  let id = this.props.script.id;\n                  this.props.onDeleted(id, true)\n                }}>Yes</button>\n              <button\n                className=\"button\"\n                onClick={this.props.onCancel}>No</button>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n}\n\nclass EditButton extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <div className={`BustabitScript EditButton control ${className}`}>\n        <button {...rest} className={`button is-info ${className}`}>\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\n            <i className=\"fas fa-eye\"/>\n          </span>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass SelectButton extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <div className={\"BustabitScript SelectButton control\"}>\n        <button {...rest} className={`button ${className}`}>\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\n            <i className=\"fas fa-play\"/>\n          </span>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass DeleteButton extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <div className={\"BustabitScript DeleteButton control\"}>\n        <button {...rest} className={`button is-light ${className}`}>\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\n            <i className=\"fas fa-trash-alt\"/>\n          </span>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass NewButton extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <div className={`BustabitScript NewButton control ${className}`.trim()}>\n        <button {...rest} className=\"button is-success\">\n          <span className=\"icon is-normal\" width=\"2em\" height=\"2em\">\n            <i className=\"fas fa-plus\"/>\n          </span>\n          <span>New</span>\n        </button>\n      </div>\n    )\n  }\n}\n\nclass GoBackButton extends Component {\n  render() {\n    const { className = '', ...rest } = this.props;\n    return (\n      <a {...rest} className={`button is-normal ${className}`}>\n        <span className=\"icon is-medium\">\n          <i className=\"fas fa-arrow-left\"/>\n        </span>\n        <span>Go Back</span>\n      </a>\n    )\n  }\n}\n\nclass BackToTopButton extends Component {\n  render() {\n    const { className = '', onClick, ...rest } = this.props || {};\n    return (\n      <button {...rest} className={`button is-normal ${className}`}\n        onClick={() => {\n          window.scroll({ top: 0, behavior: 'smooth' });\n          if (onClick) onClick();\n        }}>\n        <span className=\"icon is-medium\">\n          <i className=\"fas fa-arrow-up\"/>\n        </span>\n        <span>Back to Top</span>\n      </button>\n    )\n  }\n}\n\nclass Edit extends Component {\n\n  constructor(props) {\n    super(props);\n    this.close = this.close.bind(this)\n    this.restore = this.restore.bind(this)\n  }\n\n  close(event) {\n    if (event) { event.preventDefault(); }\n    this.props.onCancel()\n  }\n\n  restore(event) {\n    if (event) { event.preventDefault(); }\n    this.props.onRestore(this.props.script.id)\n  }\n\n  render() {\n    return (\n      <div className={'BustabitScript-Edit modal' + (this.props.script ? ' is-active' : '')}>\n        <div className=\"modal-background\" onClick={this.close}/>\n        <div className=\"modal-card\" style={{ width: '90%' }}>\n          <form onSubmit={(event) => {\n            if (event) { event.preventDefault(); }\n            const id = String(event.target['id'].value || '').trim();\n            const name = String(event.target['name'].value || '').trim();\n            const text = String(event.target['text'].value || '').trim();\n            const script = { ...this.props.script, id, name, text };\n            this.props.onSave(script)\n          }}>\n            <header className=\"modal-card-head\">\n              <p className=\"modal-card-title\">Edit Script</p>\n              <button className=\"delete is-large\"\n                onClick={this.close}>\n              </button>\n            </header>\n            <section className=\"modal-card-body\">\n              {this.props.error && (\n                <div className=\"notification is-warning\">\n                  <p><strong>Error</strong></p>\n                  <pre className=\"notification is-warning has-text-left\">\n                    {String(this.props.error)}\n                  </pre>\n                </div>\n              )}\n              <input className=\"input\"\n                type=\"hidden\"\n                name=\"id\"\n                defaultValue={this.props.script ? this.props.script.id : ''} />\n              <input className=\"input is-normal mb-3\"\n                required={true}\n                type=\"text\"\n                name=\"name\"\n                readOnly={this.props.script?.isSample}\n                defaultValue={this.props.script ? this.props.script.name : ''} />\n              <textarea className=\"textarea is-normal\"\n                required={true}\n                rows=\"20\"\n                name=\"text\"\n                defaultValue={this.props.script ? this.props.script.text : ''}>\n              </textarea>\n            </section>\n            <footer className=\"modal-card-foot is-justify-content-flex-end\">\n              {(this.props.script?.isSample) && (\n                <button className=\"button is-warning has-text-white\"\n                        onClick={this.restore}>\n                <span className=\"icon is-medium\">\n                  <i className=\"fas fa-undo\"/>\n                </span>\n                  <span>Restore</span>\n                </button>\n              )}\n              <button className=\"button is-success\" type=\"submit\">\n                Save Script\n              </button>\n            </footer>\n          </form>\n        </div>\n      </div>\n    )\n  }\n}\nEdit.propTypes = {\n  script: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    text: PropTypes.string.isRequired,\n    config: PropTypes.object,\n  }).isRequired,\n  onCancel: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired\n};\n\nclass New extends Edit { }\n\nNew.propTypes = {\n  script: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    text: PropTypes.string.isRequired\n  }),\n  onCancel: PropTypes.func.isRequired,\n  onSave: PropTypes.func.isRequired\n};\n\n\nclass Control extends Component {\n  render() {\n    const { children, label, icon, className = '', ...rest } = this.props;\n    return (\n      <div className=\"field is-horizontal\">\n        {label === undefined ? null : (\n          <div className=\"field-label is-normal\">\n            <label className=\"label\">\n              {label}\n            </label>\n          </div>\n        )}\n        <div className=\"field-body\">\n          <div className=\"field\">\n            <div className={`control ${icon ? ' has-icons-left' : ''} ${className}`} {...rest}>\n              {children}\n              {icon && (\n                <span className=\"icon is-small is-left\">\n                  <i className={icon}/>\n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nconst BustabitScript = { App, Title, EditButton }\nexport default BustabitScript\n","import React, { Component } from 'react';\n\nclass DisclaimerButton extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  render () {\n    const { className = '', ...rest } = this.props\n    return (\n      <div>\n        <button {...rest} className={`button ${className}`}\n                onClick={() => this.setState({ isOpen: true })}>\n          <span className=\"icon is-medium\">\n            <i className=\"fas fa-exclamation\"></i>\n          </span>\n          <span className=\"is-uppercase\">Disclaimer</span>\n        </button>\n        <DisclaimerModal\n          isOpen={this.state.isOpen}\n          onClose={() => this.setState({ isOpen: false })}/>\n      </div>\n    )\n  }\n}\n\nclass DisclaimerModal extends Component {\n  render () {\n    return (\n      <div className={'modal' + (this.props.isOpen ? ' is-active' : '')}>\n        <div className=\"modal-background\"\n             onClick={this.props.onClose}>\n        </div>\n        <div className=\"modal-content\">\n          <div className=\"box\">\n            <h4 className=\"title is-4\">\n              <span\n                className=\"icon is-medium\">\n                <i className=\"fas fa-exclamation\"></i>\n              </span>\n              Disclaimer\n            </h4>\n            <p>No one is responsible if you lose money using this tool and/or trusting its results.</p>\n            <p>All it does is simulate you running a script on previous bustabit games. </p>\n            <p>Results achieved in the past don't provide any guarantee for the future.</p>\n            <p>And, there's no guarantee that the simulated engine on this site, behaves in exactly the same way as the engine on bustabit.</p>\n          </div>\n        </div>\n        <button\n          className=\"modal-close is-large\"\n          onClick={this.props.onClose}>\n        </button>\n      </div>\n    )\n  }\n}\n\nexport { DisclaimerButton, DisclaimerModal }\n","import React, { Component } from 'react';\n\nclass DonateButton extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isOpen: false\n    }\n  }\n\n  render () {\n    const { className = '', ...rest } = this.props\n    return (\n      <div>\n        <button {...rest}\n                className={`button ${className}`}\n                onClick={() => this.setState({ isOpen: true })}>\n          <span className=\"icon\">\n            <i className=\"fas fa-hand-holding-usd\"></i>\n          </span>\n          <span className=\"is-uppercase\">Send a tip...</span>\n        </button>\n        <DonateModal\n          isOpen={this.state.isOpen}\n          onClose={() => this.setState({ isOpen: false })}/>\n      </div>\n    )\n  }\n\n}\n\nclass DonateModal extends Component {\n  render () {\n    return (\n      <div className={'modal' + (this.props.isOpen ? ' is-active' : '')}>\n        <div className=\"modal-background\"\n             onClick={this.props.onClose}>\n        </div>\n        <div className=\"modal-content\">\n          <div className=\"box\">\n            <p><strong>Hello fellow gambler!</strong></p>\n            <p>I hope you like my Bustabit Simulator. I worked hard on it.\n              <span className=\"icon is-medium\">\n                <i className=\"fas fa-grin-beam-sweat\"></i>\n              </span>\n            </p>\n            <p>If you use this tool regularly, please consider donating a dollar or two.</p>\n            <p>\n              <a href=\"https://bustabit.com/tip\"\n                 target=\"_blank\" rel=\"noopener noreferrer\">\n                <span>https://bustabit.com/tip</span>\n              </a>\n              <span>My username is </span><span className=\"is-bold\">Mtihc</span>\n            </p>\n            <p>\n              <a href=\"https://paypal.me/MitchStoffels\"\n                 target=\"_blank\" rel=\"noopener noreferrer\">\n                <span>https://paypal.me/MitchStoffels</span>\n              </a>\n            </p>\n          </div>\n        </div>\n        <button\n          className=\"modal-close is-large\"\n          onClick={this.props.onClose}>\n        </button>\n      </div>\n    )\n  }\n}\n\nexport { DonateModal , DonateButton }\n","const NotificationTypes = {\n  INFO:    'info',\n  SUCCESS: 'success',\n  WARNING: 'warning',\n  ERROR:   'error'\n};\n\nexport default NotificationTypes;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types'\nimport NotificationTypes from \"../../data/NotificationTypes\";\nimport FlipMove from 'react-flip-move';\nimport './Notifications.sass';\n\nfunction getClassByType(type) {\n  switch(type) {\n    case NotificationTypes.INFO:\n      return 'is-info';\n    case NotificationTypes.WARNING:\n      return 'is-warning';\n    case NotificationTypes.SUCCESS:\n      return 'is-success';\n    case NotificationTypes.ERROR:\n      return 'is-danger';\n    default:\n      return 'is-info';\n  }\n}\n\n\nfunction classNames(...classNames) {\n  return classNames.filter(className => !!className)\n    .map(className => className.toString())\n    .join(' ')\n    .replace(/\\s+/g, ' ')\n    .trim();\n}\n\nclass Notification extends Component {\n  static propTypes = {\n    children: PropTypes.any,\n    header: PropTypes.any,\n    id: (props, propName, componentName) => {\n      if (props[propName] && typeof(props[propName]) !== 'string') {\n        return new Error(`${componentName} ${propName} must be a string`);\n      }\n      if (!props[propName] && props.onClose) {\n        return new Error(`${componentName} ${propName} is required when onClose is set`);\n      }\n    },\n    modal: PropTypes.bool,\n    onClose: PropTypes.func,\n    type: PropTypes.oneOf(Object.values(NotificationTypes)).isRequired,\n  };\n\n  render () {\n    let { children, className = '', header, id, modal, onClose, type, ...rest } = this.props;\n    let notification = (\n      <article\n        {...rest}\n        className={classNames('Notification', 'message', className, getClassByType(type))}>\n        {(header || onClose) && (\n          <div className=\"message-header\">\n            <p>{header}</p>\n            {onClose && (\n              <button className=\"delete\" onClick={() => onClose(id)}/>\n            )}\n          </div>\n        )}\n        <div className=\"message-body\">\n          {children}\n        </div>\n      </article>\n    );\n    if (modal) {\n      return (\n        <div className={\"modal is-active\"}>\n          <div className={\"modal-background\"} onClick={() => onClose(id)}/>\n          <div className={\"modal-content\"}>\n            {notification}\n          </div>\n        </div>\n      )\n    } else {\n      return notification;\n    }\n  }\n}\n\nfunction NotificationsContainer (props) {\n  let { className, items, container, notificationProps, ...rest } = props;\n  return (\n    <div\n      className={classNames('NotificationsContainer', `NotificationsContainer-${container}`)}>\n      <FlipMove\n        {...rest}\n        className={classNames('FlipMove', className)}\n        enterAnimation=\"none\"\n        leaveAnimation=\"none\">\n        {items.filter(item => item.container === container).entrySeq().map(([id, item]) => {\n          let { container, ...rest } = item;\n          return (\n            <Notification key={`Notification-${id}`} {...notificationProps} {...rest}>\n              {item.children}\n            </Notification>\n          )\n        })}\n      </FlipMove>\n    </div>\n  );\n}\n\nclass Notifications extends Component {\n  static propTypes = {\n    notifications: PropTypes.shape({\n      items: PropTypes.object.isRequired,\n    }).isRequired,\n  };\n\n  render () {\n    let { notifications, className = '', ...rest } = this.props;\n    return (\n      <div\n        {...rest}\n        className={`Notifications ${className}`.trim()}>\n        <NotificationsContainer\n          items={notifications.items}\n          container={'top-left'} />\n        <NotificationsContainer\n          items={notifications.items}\n          container={'top-right'} />\n        <NotificationsContainer\n          items={notifications.items}\n          container={'bottom-left'} />\n        <NotificationsContainer\n          items={notifications.items}\n          container={'bottom-right'} />\n      </div>\n    )\n  }\n}\n\nexport default Notifications;","import {Dispatcher} from 'flux';\n\nexport default new Dispatcher();\n","const ActionTypes = {\n  LOADED:       'scripts/loaded',\n  NEW:          'scripts/new',\n  CREATE_ERROR: 'scripts/create-error',\n  CREATED:      'scripts/created',\n  EDIT:         'scripts/edit',\n  UPDATE_ERROR: 'scripts/update-error',\n  UPDATED:      'scripts/updated',\n  CANCEL:       'scripts/cancel',\n  DELETE:       'scripts/delete',\n  DELETE_ERROR: 'scripts/delete-error',\n  DELETED:      'scripts/deleted',\n  SIMULATE:     'scripts/simulate',\n  SIMULATED:    'scripts/simulated',\n};\n\nexport default ActionTypes;\n","const ActionTypes = {\n  OPEN:       'notifications/open',\n  CLOSE:      'notifications/close'\n};\n\nexport default ActionTypes;\n","import { getUniqueID } from './AppUtils'\nimport NotificationActionTypes from './NotificationActionTypes';\nimport NotificationTypes from './NotificationTypes';\nimport NotificationDispatcher from './AppDispatcher';\n\nconst Actions = {\n  open (type, content, options) {\n    let { id = getUniqueID(), container = 'top-right', closeable = true, autoCloseTimeout = 0, ...props } = options || {};\n    let notification = {\n      type,\n      id,\n      children: content,\n      container,\n      onClose: closeable ? this.close.bind(this, id) : undefined,\n      ...props,\n    };\n    NotificationDispatcher.dispatch({ type: NotificationActionTypes.OPEN, notification });\n    if (autoCloseTimeout) {\n      setTimeout(() => {\n        this.close(notification.id)\n      }, autoCloseTimeout)\n    }\n  },\n\n  info (content, options) {\n    this.open(NotificationTypes.INFO, content, options)\n  },\n\n  success (content, options) {\n    this.open(NotificationTypes.SUCCESS, content, options)\n  },\n\n  warning (content, options) {\n    this.open(NotificationTypes.WARNING, content, options)\n  },\n\n  error (content, options) {\n    this.open(NotificationTypes.ERROR, content, options)\n  },\n\n  close (id) {\n    NotificationDispatcher.dispatch({ type: NotificationActionTypes.CLOSE, id })\n  }\n};\n\nexport default Actions;","import AppDispatcher from './AppDispatcher';\nimport ScriptActionTypes from './ScriptActionTypes';\nimport ScriptUtils from './ScriptUtils'\nimport NotificationActions from './NotificationActions'\n\nconst Actions = {\n\n  load () {\n    let scripts = ScriptUtils.load();\n    AppDispatcher.dispatch({ type: ScriptActionTypes.LOADED, scripts });\n  },\n\n  restoreSamples () {\n    let scripts = ScriptUtils.restoreSamples()\n    AppDispatcher.dispatch({ type: ScriptActionTypes.LOADED, scripts });\n    NotificationActions.success('Sample scripts restored.', { autoCloseTimeout: 2000, container: 'bottom-left' })\n  },\n\n  restoreSample (id) {\n    let scripts = ScriptUtils.restoreSample(id)\n    AppDispatcher.dispatch({ type: ScriptActionTypes.LOADED, scripts });\n  },\n\n  delete (id) {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.DELETE, id })\n  },\n\n  deleted (id) {\n    ScriptUtils.delete(id)\n    AppDispatcher.dispatch({ type: ScriptActionTypes.DELETED, id })\n  },\n\n  save (script) {\n    if (!script.id) {\n      try {\n        ScriptUtils.save(script)\n        AppDispatcher.dispatch({ type: ScriptActionTypes.CREATED, script })\n        NotificationActions.success('Script saved.', { autoCloseTimeout: 2000, container: 'bottom-left' })\n      } catch (e) {\n        AppDispatcher.dispatch({ type: ScriptActionTypes.CREATE_ERROR, script, error: e })\n      }\n    } else {\n      try {\n        ScriptUtils.save(script)\n        AppDispatcher.dispatch({ type: ScriptActionTypes.UPDATED, script })\n        NotificationActions.success('Script saved.', { autoCloseTimeout: 2000, container: 'bottom-left' })\n      } catch (e) {\n        AppDispatcher.dispatch({ type: ScriptActionTypes.UPDATE_ERROR, script, error: e })\n      }\n    }\n  },\n\n  new () {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.NEW })\n  },\n\n  edit (id) {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.EDIT, id })\n  },\n\n  cancel () {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.CANCEL })\n  },\n\n  select (id) {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.SELECT, id })\n  },\n\n  deselect () {\n    AppDispatcher.dispatch({ type: ScriptActionTypes.DESELECT })\n  },\n\n  run (settings) {\n    Actions.save(settings.script)\n    AppDispatcher.dispatch({ type: ScriptActionTypes.SIMULATE, settings });\n    ScriptUtils\n      .run(settings)\n      .then((results) => {\n        AppDispatcher.dispatch({ type: ScriptActionTypes.SIMULATED, results })\n      })\n  },\n\n  exportScripts () {\n    ScriptUtils.exportScripts()\n      .then(() => {\n        NotificationActions.success('Scripts exported.', { autoCloseTimeout: 2000, container: 'bottom-left' })\n      })\n      .catch(error => {\n        NotificationActions.error(error.message, { autoCloseTimeout: 3000 })\n      })\n  },\n\n  exportScript (id) {\n    ScriptUtils.exportScript(id)\n  },\n\n  copyScript (id) {\n    let scripts = ScriptUtils.load();\n    let script = scripts[id];\n    ScriptUtils.setClipboardContent(script.text).then(() => {\n      NotificationActions.success('Script copied to clipboard', { autoCloseTimeout: 3000, container: 'bottom-left' })\n    })\n  }\n};\n\nexport default Actions;\n","import React from 'react';\nimport 'bulma/css/bulma.css'\nimport './AppView.sass';\nimport BustabitScript from './components/BustabitScript'\nimport { DisclaimerButton } from './components/Disclaimer'\nimport { DonateButton } from './components/Donate'\nimport Notifications from './components/Notifications'\nimport * as PropTypes from \"prop-types\";\nimport ScriptActions from \"../data/ScriptActions\";\n\nfunction ExportAllScriptsButton(props) {\n  const { className = '', ...rest } = props\n  return (\n    <div>\n      <button {...rest} className={`button ${className}`}\n              onClick={ScriptActions.exportScripts}>\n          <span className=\"icon is-medium\">\n            <i className=\"fas fa-file-export\"></i>\n          </span>\n        <span className=\"is-uppercase\">Export All Scripts</span>\n      </button>\n    </div>\n  )\n}\n\nExportAllScriptsButton.propTypes = {className: PropTypes.string};\n\nfunction AppView(props) {\n  return (\n    <div className=\"AppView\">\n      <nav className=\"navbar has-shadow\">\n        <div className=\"container\">\n          <div className=\"navbar-brand\">\n            <div className=\"navbar-item\">\n              <BustabitScript.Title />\n            </div>\n          </div>\n          <div className=\"navbar-end\">\n            <div className=\"navbar-item\">\n              <div className=\"buttons\">\n                <DisclaimerButton className=\"is-small is-light\" />\n                <DonateButton className=\"is-small is-light\" />\n                <ExportAllScriptsButton className=\"is-small is-light\" />\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n      <main>\n        <Notifications\n          notifications={props.notifications}/>\n        <BustabitScript.App\n          scripts={props.scripts}/>\n      </main>\n    </div>\n  );\n}\n\nexport default AppView\n","import Immutable from 'immutable';\nimport { ReduceStore } from 'flux/utils';\nimport ScriptActionTypes from './ScriptActionTypes';\nimport AppDispatcher from './AppDispatcher';\n\nclass ScriptStore extends ReduceStore {\n  constructor() {\n    super(AppDispatcher);\n  }\n\n  getInitialState() {\n    return Immutable.OrderedMap()\n  }\n\n  reduce(state, action) {\n\n    switch (action.type) {\n      case ScriptActionTypes.LOADED:\n        return state.clear().merge(action.scripts)\n\n      case ScriptActionTypes.DELETED:\n        return state.delete(action.id)\n\n      case ScriptActionTypes.CREATED:\n        return state.set(action.script.id, action.script)\n\n      case ScriptActionTypes.UPDATED:\n        return state.set(action.script.id, action.script)\n\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new ScriptStore();\n","import Immutable from 'immutable';\nimport {ReduceStore} from 'flux/utils';\nimport ScriptActionTypes from './ScriptActionTypes';\nimport AppDispatcher from './AppDispatcher';\nimport ScriptConstants from './ScriptConstants';\n\nclass ScriptListStore extends ReduceStore {\n  constructor() {\n    super(AppDispatcher);\n  }\n\n  getInitialState() {\n    return Immutable.OrderedMap({\n      creating: undefined,\n      editingId: undefined,\n      deletingId: undefined,\n      selectedId: undefined,\n      isSimulating: false,\n      results: undefined,\n      error: undefined,\n    })\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case ScriptActionTypes.NEW:\n        return state.set('creating', Object.assign({}, ScriptConstants.NEW_SCRIPT))\n                    .set('createError', undefined)\n\n      case ScriptActionTypes.CREATED:\n        return state.set('creating', undefined)\n                    .set('createError', undefined)\n\n      case ScriptActionTypes.CREATE_ERROR:\n        return state.set('createError', action.error)\n\n\n      case ScriptActionTypes.EDIT:\n        return state.set('editingId', action.id)\n                    .set('updateError', undefined)\n\n      case ScriptActionTypes.UPDATED:\n        return state.set('editingId', undefined)\n                    .set('updateError', undefined)\n\n      case ScriptActionTypes.UPDATE_ERROR:\n        return state.set('updateError', action.error)\n\n\n      case ScriptActionTypes.DELETE:\n        return state.set('deletingId', action.id)\n                    .set('deleteError', undefined)\n\n      case ScriptActionTypes.DELETED:\n        return state.set('deletingId', undefined)\n                    .set('deleteError', undefined)\n\n      case ScriptActionTypes.DELETE_ERROR:\n        return state.set('deleteError', action.error)\n\n\n      case ScriptActionTypes.CANCEL:\n        return state.set('creating', undefined)\n                    .set('editingId', undefined)\n                    .set('deletingId', undefined)\n                    .set('createError', undefined)\n                    .set('updateError', undefined)\n                    .set('deleteError', undefined)\n\n      case ScriptActionTypes.SELECT:\n        return state.set('selectedId', action.id)\n                    .set('results', undefined)\n\n      case ScriptActionTypes.DESELECT:\n        return state.set('selectedId', undefined)\n\n      case ScriptActionTypes.SIMULATE:\n        return state.set('results', undefined)\n                    .set('isSimulating', true)\n\n      case ScriptActionTypes.SIMULATED:\n        return state.set('results', action.results)\n                    .set('isSimulating', false)\n\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new ScriptListStore();\n","import Immutable from 'immutable';\nimport { ReduceStore } from 'flux/utils';\nimport NotificationActionTypes from './NotificationActionTypes';\nimport NotificationDispatcher from './AppDispatcher';\n\nclass NotificationStore extends ReduceStore {\n  constructor() {\n    super(NotificationDispatcher);\n  }\n\n  getInitialState() {\n    return Immutable.OrderedMap()\n  }\n\n  reduce(state, action) {\n\n    switch (action.type) {\n      case NotificationActionTypes.OPEN:\n        return state.set(action.notification.id, action.notification)\n\n      case NotificationActionTypes.CLOSE:\n        return state.delete(action.id)\n\n      default:\n        return state;\n    }\n  }\n}\n\nexport default new NotificationStore();\n","import AppView from '../views/AppView';\nimport {Container} from 'flux/utils';\nimport ScriptStore from '../data/ScriptStore';\nimport ScriptListStore from '../data/ScriptListStore';\nimport ScriptActions from '../data/ScriptActions';\nimport NotificationStore from '../data/NotificationStore';\nimport NotificationActions from '../data/NotificationActions'\n\nfunction getStores() {\n  return [\n    ScriptStore,\n    ScriptListStore,\n    NotificationStore\n  ];\n}\n\nfunction getState() {\n  let items = ScriptStore.getState()\n  let list = ScriptListStore.getState()\n  let notifications = NotificationStore.getState()\n  return {\n    scripts: {\n      ...{\n        items: items,\n        creating: list.get('creating'),\n        editing: items.get(list.get('editingId')),\n        deleting: items.get(list.get('deletingId')),\n        selected: items.get(list.get('selectedId')),\n        isLoading: list.get('isSimulating'),\n        results: list.get('results'),\n        createError: list.get('createError'),\n        updateError: list.get('updateError'),\n        deleteError: list.get('deleteError')\n      },\n      ...{\n        load: ScriptActions.load,\n        onNew: ScriptActions.new,\n        onEdit: ScriptActions.edit,\n        onCancel: ScriptActions.cancel,\n        onRestore: (id) => {\n          ScriptActions.restoreSample(id)\n          setTimeout(() => {\n            ScriptActions.cancel()\n            ScriptActions.edit(id)\n          }, 100)\n\n        },\n        onSave: ScriptActions.save,\n        onDelete: ScriptActions.delete,\n        onDeleted: ScriptActions.deleted,\n        onSelect: ScriptActions.select,\n        onDeselect: ScriptActions.deselect,\n        onRun: ScriptActions.run,\n        exportScripts: ScriptActions.exportScripts,\n        exportScript: ScriptActions.exportScript,\n        restoreSamples: ScriptActions.restoreSamples,\n        copyScript: ScriptActions.copyScript,\n      }\n    },\n    notifications: {\n      items: notifications,\n      ...{\n        open: NotificationActions.open,\n        close: NotificationActions.close\n      }\n    }\n  };\n}\n\nexport default Container.createFunctional(AppView, getStores, getState);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.sass';\nimport AppContainer from './containers/AppContainer';\nimport * as serviceWorker from './serviceWorker';\nimport NotificationActions from './data/NotificationActions';\nwindow.NotificationActions = NotificationActions;\n\nReactDOM.render(<AppContainer />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}